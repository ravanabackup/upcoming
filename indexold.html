<!DOCTYPE html><html lang="en"><head>  <meta charset="UTF-8">  <title>Material You - Ultimate Cinema Dashboard</title>  <meta name="viewport" content="width=device-width, initial-scale=1">  <style>    :root {      --bg: #1a1c1e;      --surface: #2d2f31;      --surface-variant: #43474e;      --primary: #d1e4ff;      --on-primary: #00315c;      --secondary: #bfc8d5;      --text: #e2e2e6;      --text-variant: #c2c7cf;    }
    body { font-family: 'Google Sans', 'Roboto', sans-serif; background-color: var(--bg); color: var(--text); margin: 0; padding: 0; overflow-x: hidden; }
    header { padding: 30px 20px; display: flex; flex-direction: column; align-items: center; gap: 20px; background: linear-gradient(180deg, #121314 0%, var(--bg) 100%); }
    h1 { margin: 0; font-weight: 400; font-size: 2.2rem; color: var(--primary); }
    .search-container { width: 100%; max-width: 600px; }
    .search-bar { width: 100%; padding: 18px 26px; border-radius: 50px; border: none; background: var(--surface-variant); color: white; font-size: 16px; outline: none; box-sizing: border-box; transition: 0.3s; }
    .search-bar:focus { background: #50545c; box-shadow: 0 0 0 2px var(--primary); }
    h2 { font-weight: 500; margin: 40px 20px 10px; color: var(--secondary); font-size: 1.4rem; border-left: 4px solid var(--primary); padding-left: 15px; }
    .hidden { display: none; }
    .marquee-container { width: 100%; background: var(--surface); padding: 24px 0; overflow: hidden; white-space: nowrap; position: relative; border-bottom: 1px solid var(--surface-variant); }
    .marquee-content { display: inline-flex; gap: 24px; animation: scroll-left 120s linear infinite; }
    @keyframes scroll-left { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 30px; padding: 20px; }
    .card { background: var(--surface); border-radius: 32px; overflow: hidden; display: flex; flex-direction: column; border: 1px solid rgba(255,255,255,0.05); transition: transform 0.3s; }
    .card:hover { transform: translateY(-5px); }
    .poster-box { width: 100%; background: #000; display: flex; justify-content: center; align-items: center; min-height: 450px; overflow: hidden; }
    .card img { width: 100%; height: 100%; object-fit: cover; display: block; }
    .info { padding: 24px; display: flex; flex-direction: column; gap: 8px; flex-grow: 1; }
    .title { font-size: 19px; font-weight: 500; color: var(--primary); margin: 0; min-height: 2.4em; }
    .details { font-size: 13px; color: var(--text-variant); line-height: 1.5; margin-bottom: 10px; }
    .button-group { display: flex; gap: 10px; margin-top: auto; }
    .btn { flex: 1; padding: 12px; border: none; border-radius: 16px; cursor: pointer; font-weight: 600; font-size: 13px; transition: 0.2s; display: flex; align-items: center; justify-content: center; gap: 8px; }
    .btn-primary { background: var(--primary); color: var(--on-primary); }
    .btn-secondary { background: var(--surface-variant); color: var(--primary); }
    .modal { display: none; position: fixed; z-index: 9999; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); backdrop-filter: blur(12px); }
    .modal-content { background: var(--bg); margin: 2vh auto; padding: 30px; border-radius: 32px; width: 90%; max-width: 900px; max-height: 90vh; overflow-y: auto; border: 1px solid var(--surface-variant); }
    .close { float: right; font-size: 30px; cursor: pointer; color: var(--text-variant); }
    .video-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 24px; margin-top: 20px; background: #000; }
    .video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; }
    .cast-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: 20px; margin-top: 20px; }
    .cast-card { text-align: center; }
    .cast-card img { width: 100%; height: 180px; object-fit: cover; border-radius: 20px; background: var(--surface-variant); }
  </style></head><body>

  <header>
    <h1>Cinema Dashboard</h1>
    <div class="search-container">
      <input type="text" id="searchInput" class="search-bar" placeholder="Type movie name and press Enter...">
    </div>
  </header>

  <section id="search-section" class="hidden">
    <h2>üîç Search Results</h2>
    <div id="search-grid" class="grid"></div>
  </section>

  <section>
    <h2>üî• Now Playing</h2>
    <div class="marquee-container">
      <div class="marquee-content" id="now-playing-list"></div>
    </div>
  </section>

  <section>
    <h2>üìÖ Upcoming Malayalam</h2>
    <div id="malayalam-grid" class="grid"></div>
  </section>

  <section>
    <h2>üìÖ Upcoming Hindi</h2>
    <div id="hindi-grid" class="grid"></div>
  </section>

  <div id="mainModal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeModal">&times;</span>
      <h2 id="modalTitle" style="margin:0; color: var(--primary);"></h2>
      <div id="modalBody"></div>
    </div>
  </div>

  <script>
    const API_KEY = "29d877505bbee7b5e97716a14b0af4c7";
    const BASE_IMG = "https://image.tmdb.org/t/p/w500";
    const PROFILE_IMG = "https://image.tmdb.org/t/p/w185";
    const TODAY = new Date().toISOString().split('T')[0];

    const URLS = {
      "now-playing": `https://api.themoviedb.org/3/movie/now_playing?api_key=${API_KEY}&language=en-US&page=1`,
      "malayalam": `https://api.themoviedb.org/3/discover/movie?api_key=${API_KEY}&with_original_language=ml&primary_release_date.gte=${TODAY}&sort_by=primary_release_date.asc`,
      "hindi": `https://api.themoviedb.org/3/discover/movie?api_key=${API_KEY}&with_original_language=hi&primary_release_date.gte=${TODAY}&sort_by=primary_release_date.asc`
    };

    async function showImdbFallbacks(title) {
      const modal = document.getElementById('mainModal');
      const body = document.getElementById('modalBody');
      document.getElementById('modalTitle').innerText = `IMDb Matches: ${title}`;
      body.innerHTML = '<p style="text-align:center;">Fetching IMDb Suggestions...</p>';
      modal.style.display = 'block';
      try {
        const res = await fetch(`https://v2.sg.media-imdb.com/suggestion/h/${encodeURIComponent(title)}.json`);
        const data = await res.json();
        let html = '<div class="cast-grid">';
        (data.d || []).forEach(item => {
          const img = item.i ? item.i.imageUrl : 'https://placehold.co/185x278/black/white?text=No+Poster';
          html += `<div class="cast-card"><img src="${img}"><p style="color:var(--primary);font-size:14px;margin:5px 0;">${item.l}</p><p style="font-size:11px;">${item.y || ''} ${item.s || ''}</p></div>`;
        });
        body.innerHTML = html + '</div>';
      } catch (e) { body.innerHTML = '<p>Error loading IMDb data.</p>'; }
    }

    async function createCard(movie) {
      // Basic data from the list result to avoid hitting rate limits too hard
      const hasPoster = !!movie.poster_path;
      const posterUrl = hasPoster ? BASE_IMG + movie.poster_path : 'https://placehold.co/500x750/333/fff?text=No+Poster+Found%0AClick+to+Search+IMDb';
      
      const div = document.createElement('div');
      div.className = 'card';
      const posterClick = !hasPoster ? `onclick="showImdbFallbacks('${movie.title.replace(/'/g, "\\'")}')" style="cursor:pointer;"` : '';

      div.innerHTML = `
        <div class="poster-box" ${posterClick}><img src="${posterUrl}"></div>
        <div class="info">
          <p class="title">${movie.title}</p>
          <div class="details">
            <strong>Release:</strong> ${movie.release_date || 'TBA'}<br>
            <strong>Rating:</strong> ‚≠ê ${movie.vote_average || 'NR'}
          </div>
          <div class="button-group">
            <button class="btn btn-primary" onclick="showCast(${movie.id})">üë• Cast</button>
            <button class="btn btn-secondary" onclick="showDetails(${movie.id})">‚ÑπÔ∏è Details</button>
          </div>
        </div>`;
      return div;
    }

    async function showCast(id) {
      const res = await fetch(`https://api.themoviedb.org/3/movie/${id}/credits?api_key=${API_KEY}`);
      const data = await res.json();
      document.getElementById('modalTitle').innerText = "Cast Members";
      let html = '<div class="cast-grid">';
      (data.cast || []).slice(0, 12).forEach(c => {
        html += `<div class="cast-card"><img src="${c.profile_path ? PROFILE_IMG+c.profile_path : 'https://placehold.co/185x278/444/fff?text=NA'}"><p style="color:var(--primary);margin:5px 0;">${c.name}</p></div>`;
      });
      document.getElementById('modalBody').innerHTML = html + '</div>';
      document.getElementById('mainModal').style.display = 'block';
    }

    async function showDetails(id) {
      const res = await fetch(`https://api.themoviedb.org/3/movie/${id}?api_key=${API_KEY}&append_to_response=videos`);
      const d = await res.json();
      const trailer = d.videos.results.find(v => v.type === 'Trailer') || d.videos.results[0];
      document.getElementById('modalTitle').innerText = d.title;
      document.getElementById('modalBody').innerHTML = `
        <p>${d.overview}</p>
        ${trailer ? `<div class="video-container"><iframe src="https://www.youtube.com/embed/${trailer.key}" allowfullscreen></iframe></div>` : '<p>No Trailer Available</p>'}
      `;
      document.getElementById('mainModal').style.display = 'block';
    }

    document.getElementById('searchInput').addEventListener('keypress', async (e) => {
      if (e.key === 'Enter') {
        const q = e.target.value;
        if (!q) return;
        const grid = document.getElementById('search-grid');
        document.getElementById('search-section').classList.remove('hidden');
        grid.innerHTML = '<p>Searching...</p>';
        const res = await fetch(`https://api.themoviedb.org/3/search/movie?api_key=${API_KEY}&query=${encodeURIComponent(q)}`);
        const data = await res.json();
        grid.innerHTML = '';
        for(let m of data.results) grid.appendChild(await createCard(m));
        window.scrollTo({top: 0, behavior: 'smooth'});
      }
    });

    async function init() {
      for (const [key, url] of Object.entries(URLS)) {
        try {
          const res = await fetch(url);
          const data = await res.json();
          const target = key === 'now-playing' ? 'now-playing-list' : key + '-grid';
          const container = document.getElementById(target);
          if (!container) continue;
          for (const m of data.results.slice(0, 12)) {
            container.appendChild(await createCard(m));
          }
          if (key === 'now-playing') container.innerHTML += container.innerHTML;
        } catch (err) { console.error("Load failed for " + key, err); }
      }
    }

    document.getElementById('closeModal').onclick = () => document.getElementById('mainModal').style.display = 'none';
    window.onclick = (e) => { if(e.target.className === 'modal') document.getElementById('mainModal').style.display = 'none'; };

    init();
  </script>
</body></html>
